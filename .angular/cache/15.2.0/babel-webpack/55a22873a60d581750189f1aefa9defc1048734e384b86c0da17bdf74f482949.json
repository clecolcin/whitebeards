{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/data-repository\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"./loading-spinner\";\nfunction CoursesComponent_tr_29_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 9);\n    i0.ɵɵtext(1, \"Sign In to Enroll\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CoursesComponent_tr_29_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function CoursesComponent_tr_29_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const class_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.enroll(class_r1));\n    });\n    i0.ɵɵtext(1, \"Enroll\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CoursesComponent_tr_29_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function CoursesComponent_tr_29_button_18_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const class_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.drop(class_r1));\n    });\n    i0.ɵɵtext(1, \"Drop\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0) {\n  return [a0];\n};\nfunction CoursesComponent_tr_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"a\", 4);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\")(5, \"a\", 4);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 2);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 2);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 2);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\", 5);\n    i0.ɵɵtemplate(16, CoursesComponent_tr_29_span_16_Template, 2, 0, \"span\", 6);\n    i0.ɵɵtemplate(17, CoursesComponent_tr_29_button_17_Template, 2, 0, \"button\", 7);\n    i0.ɵɵtemplate(18, CoursesComponent_tr_29_button_18_Template, 2, 0, \"button\", 7);\n    i0.ɵɵelement(19, \"loading-spinner\", 8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const class_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(12, _c0, \"/catalog/\" + class_r1.course.courseNumber));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(class_r1.course.courseNumber);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(14, _c0, \"/catalog/\" + class_r1.course.courseNumber));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(class_r1.course.courseName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(class_r1.professor);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(class_r1.days);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(class_r1.time);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(class_r1.course.creditHours);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.dataRepository.currentUser);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.dataRepository.currentUser && !class_r1.enrolled && !class_r1.processing);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.dataRepository.currentUser && class_r1.enrolled && !class_r1.processing);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"loading\", class_r1.processing);\n  }\n}\nexport class CoursesComponent {\n  constructor(dataRepository) {\n    this.dataRepository = dataRepository;\n    this.classes = [];\n    this.visibleClasses = [];\n  }\n  ngOnInit() {\n    this.dataRepository.getCatalog().subscribe(classes => {\n      this.classes = classes;\n      this.applyFilter('');\n    });\n  }\n  enroll(classToEnroll) {\n    classToEnroll.processing = true;\n    this.dataRepository.enroll(classToEnroll.classId).subscribe({\n      error: err => {\n        console.error(err);\n        classToEnroll.processing = false;\n      },\n      complete: () => {\n        classToEnroll.processing = false;\n        classToEnroll.enrolled = true;\n      }\n    });\n  }\n  drop(classToDrop) {\n    classToDrop.processing = true;\n    this.dataRepository.drop(classToDrop.classId).subscribe({\n      error: err => {\n        console.error(err);\n        classToDrop.processing = false;\n      },\n      complete: () => {\n        classToDrop.processing = false;\n        classToDrop.enrolled = false;\n      }\n    });\n  }\n  applyFilter(filter) {\n    if (!filter) {\n      this.visibleClasses = this.classes;\n      return;\n    }\n    if (filter === 'GEN') {\n      this.visibleClasses = this.classes.filter(c => !c.course.courseNumber.startsWith('CH') && !c.course.courseNumber.startsWith('PO') && !c.course.courseNumber.startsWith('SP'));\n    } else {\n      this.visibleClasses = this.classes.filter(c => c.course.courseNumber.startsWith(filter));\n    }\n  }\n}\nCoursesComponent.ɵfac = function CoursesComponent_Factory(t) {\n  return new (t || CoursesComponent)(i0.ɵɵdirectiveInject(i1.DataRepositoryService));\n};\nCoursesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CoursesComponent,\n  selectors: [[\"ng-component\"]],\n  decls: 30,\n  vars: 1,\n  consts: [[1, \"departments\"], [3, \"click\"], [1, \"center\"], [4, \"ngFor\", \"ngForOf\"], [3, \"routerLink\"], [1, \"enroll\", \"center\"], [\"class\", \"sign-in\", \"disabled\", \"\", 4, \"ngIf\"], [3, \"click\", 4, \"ngIf\"], [3, \"loading\"], [\"disabled\", \"\", 1, \"sign-in\"]],\n  template: function CoursesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function CoursesComponent_Template_button_click_1_listener() {\n        return ctx.applyFilter(\"CH\");\n      });\n      i0.ɵɵtext(2, \"CharmsX\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function CoursesComponent_Template_button_click_3_listener() {\n        return ctx.applyFilter(\"PO\");\n      });\n      i0.ɵɵtext(4, \"Potions\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function CoursesComponent_Template_button_click_5_listener() {\n        return ctx.applyFilter(\"SP\");\n      });\n      i0.ɵɵtext(6, \"Spells\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function CoursesComponent_Template_button_click_7_listener() {\n        return ctx.applyFilter(\"GEN\");\n      });\n      i0.ɵɵtext(8, \"Generals\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function CoursesComponent_Template_button_click_9_listener() {\n        return ctx.applyFilter(\"\");\n      });\n      i0.ɵɵtext(10, \"All\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"div\")(12, \"table\")(13, \"thead\")(14, \"th\");\n      i0.ɵɵtext(15, \"Course Num\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"th\");\n      i0.ɵɵtext(17, \"Course Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"th\");\n      i0.ɵɵtext(19, \"Professor\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"th\", 2);\n      i0.ɵɵtext(21, \"Days\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"th\", 2);\n      i0.ɵɵtext(23, \"Time\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"th\", 2);\n      i0.ɵɵtext(25, \"Credits\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"th\", 2);\n      i0.ɵɵtext(27, \"Enroll/Drop\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(28, \"tbody\");\n      i0.ɵɵtemplate(29, CoursesComponent_tr_29_Template, 20, 16, \"tr\", 3);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(29);\n      i0.ɵɵproperty(\"ngForOf\", ctx.visibleClasses);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.RouterLink, i4.LoadingComponent],\n  styles: [\".departments[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.departments[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:180px;height:65px;font-size:24px;background-color:#556b8e;color:#d3f0fb;margin:20px 0}button[_ngcontent-%COMP%]{font-size:22px;padding:5px 10px}table[_ngcontent-%COMP%]{width:98%;margin:10px 10px 30px;padding-bottom:30px}th[_ngcontent-%COMP%]{background-color:#369;padding:5px;color:#cdf;text-align:left}td[_ngcontent-%COMP%]{padding:5px}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#cdf}.center[_ngcontent-%COMP%]{text-align:center}.sign-in[_ngcontent-%COMP%]{color:#666}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}